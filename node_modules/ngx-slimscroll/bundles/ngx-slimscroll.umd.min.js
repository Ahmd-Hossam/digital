!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ngx-slimscroll",["exports","@angular/core","@angular/common","rxjs","rxjs/operators"],e):e((t=t||self)["ngx-slimscroll"]={},t.ng.core,t.ng.common,t.rxjs,t.rxjs.operators)}(this,(function(t,e,r,i,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var n=function(){return(n=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(t,e,r,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}function a(t,e){return function(r,i){e(r,i,t)}}function l(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,o,n=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t}var d=function(t){this.type=t.type,this.y=t&&t.y?t.y:0,this.percent=t&&t.percent?t.percent:0,this.duration=t&&t.duration?t.duration:0,this.easing=t&&t.easing?t.easing:"linear"},p=new e.InjectionToken("NGX_SLIMSCROLL_DEFAULTS"),u=function(){function t(t){this.position=t&&t.position?t.position:"right",this.barBackground=t&&t.barBackground?t.barBackground:"#343a40",this.barOpacity=t&&t.barOpacity?t.barOpacity:"1",this.barWidth=t&&t.barWidth?t.barWidth:"12",this.barBorderRadius=t&&t.barBorderRadius?t.barBorderRadius:"5",this.barMargin=t&&t.barMargin?t.barMargin:"0 0 0 0",this.gridBackground=t&&t.gridBackground?t.gridBackground:"#adb5bd",this.gridOpacity=t&&t.gridOpacity?t.gridOpacity:"1",this.gridWidth=t&&t.gridWidth?t.gridWidth:"8",this.gridBorderRadius=t&&t.gridBorderRadius?t.gridBorderRadius:"10",this.gridMargin=t&&t.gridMargin?t.gridMargin:"0 0 0 0",this.alwaysVisible=!t||void 0===t.alwaysVisible||t.alwaysVisible,this.visibleTimeout=t&&t.visibleTimeout?t.visibleTimeout:1e3,this.alwaysPreventDefaultScroll=!t||void 0===t.alwaysPreventDefaultScroll||t.alwaysPreventDefaultScroll}return t.prototype.merge=function(e){var r=new t;return r.position=e&&e.position?e.position:this.position,r.barBackground=e&&e.barBackground?e.barBackground:this.barBackground,r.barOpacity=e&&e.barOpacity?e.barOpacity:this.barOpacity,r.barWidth=e&&e.barWidth?e.barWidth:this.barWidth,r.barBorderRadius=e&&e.barBorderRadius?e.barBorderRadius:this.barBorderRadius,r.barMargin=e&&e.barMargin?e.barMargin:this.barMargin,r.gridBackground=e&&e.gridBackground?e.gridBackground:this.gridBackground,r.gridOpacity=e&&e.gridOpacity?e.gridOpacity:this.gridOpacity,r.gridWidth=e&&e.gridWidth?e.gridWidth:this.gridWidth,r.gridBorderRadius=e&&e.gridBorderRadius?e.gridBorderRadius:this.gridBorderRadius,r.gridMargin=e&&e.gridMargin?e.gridMargin:this.gridMargin,r.alwaysVisible=e&&void 0!==e.alwaysVisible?e.alwaysVisible:this.alwaysVisible,r.visibleTimeout=e&&e.visibleTimeout?e.visibleTimeout:this.visibleTimeout,r.alwaysPreventDefaultScroll=!e||void 0===e.alwaysPreventDefaultScroll||e.alwaysPreventDefaultScroll,r},t}(),c=function(t){this.scrollPosition=t&&t.scrollPosition?t.scrollPosition:0,this.isScrollAtStart=!t||void 0===t.isScrollAtStart||t.isScrollAtStart,this.isScrollAtEnd=!(!t||void 0===t.isScrollAtEnd)&&t.isScrollAtEnd},g=function(t){return t},y=function(t){return t*t},f=function(t){return t*(2-t)},b=function(t){return t<.5?2*t*t:(4-2*t)*t-1},m=function(t){return t*t*t},v=function(t){return--t*t*t+1},S=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},w=function(t){return t*t*t*t},T=function(t){return 1- --t*t*t*t},B=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},O=function(t){return t*t*t*t*t},C=function(t){return 1+--t*t*t*t*t},E=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},M={linear:g,inQuad:y,outQuad:f,inOutQuad:b,inCubic:m,outCubic:v,inOutCubic:S,inQuart:w,outQuart:T,inOutQuart:B,inQuint:O,outQuint:C,inOutQuint:E},H=function(){function t(t,r,i,o){this.viewContainer=t,this.renderer=r,this.document=i,this.optionsDefaults=o,this.enabled=!0,this.scrollChanged=new e.EventEmitter,this.barVisibilityChange=new e.EventEmitter,this.el=this.viewContainer.element.nativeElement,this.body=this.document.querySelector("body"),this.mutationThrottleTimeout=50}return t.prototype.ngOnInit=function(){!this.interactionSubscriptions&&this.enabled&&this.setup()},t.prototype.ngOnChanges=function(t){t.enabled&&(this.enabled?this.setup():this.destroy())},t.prototype.ngOnDestroy=function(){this.destroy()},t.prototype.setup=function(){var t=this;if(this.interactionSubscriptions=new i.Subscription,this.optionsDefaults?this.options=new u(this.optionsDefaults).merge(this.options):this.options=new u(this.options),this.setStyle(),this.wrapContainer(),this.initGrid(),this.initBar(),this.getBarHeight(),this.initWheel(),this.initDrag(),this.options.alwaysVisible||this.hideBarAndGrid(),MutationObserver&&(this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=new MutationObserver((function(){t.mutationThrottleTimeout&&(clearTimeout(t.mutationThrottleTimeout),t.mutationThrottleTimeout=setTimeout(t.onMutation.bind(t),50))})),this.mutationObserver.observe(this.el,{subtree:!0,childList:!0})),this.scrollEvents&&this.scrollEvents instanceof e.EventEmitter){var r=this.scrollEvents.subscribe((function(e){return t.handleEvent(e)}));this.interactionSubscriptions.add(r)}},t.prototype.handleEvent=function(t){if("scrollToBottom"===t.type){var e=this.el.scrollHeight-this.el.clientHeight;this.scrollTo(e,t.duration,t.easing)}else if("scrollToTop"===t.type){e=0;this.scrollTo(e,t.duration,t.easing)}else if("scrollToPercent"===t.type&&t.percent>=0&&t.percent<=100){e=Math.round((this.el.scrollHeight-this.el.clientHeight)/100*t.percent);this.scrollTo(e,t.duration,t.easing)}else if("scrollTo"===t.type){var r=this.el.scrollHeight-this.el.clientHeight;(e=t.y<=r?t.y:r)>=0&&this.scrollTo(e,t.duration,t.easing)}else"recalculate"===t.type&&this.getBarHeight()},t.prototype.setStyle=function(){var t=this.el;this.renderer.setStyle(t,"overflow","hidden")},t.prototype.onMutation=function(){this.getBarHeight(),this.setBarTop()},t.prototype.wrapContainer=function(){this.wrapper=this.renderer.createElement("div");var t=this.wrapper,e=this.el;this.renderer.addClass(t,"slimscroll-wrapper"),this.renderer.setStyle(t,"position","relative"),this.renderer.setStyle(t,"overflow","hidden"),this.renderer.setStyle(t,"display","block"),this.renderer.setStyle(t,"margin",getComputedStyle(e).margin),this.renderer.setStyle(t,"width","100%"),this.renderer.setStyle(t,"height",getComputedStyle(e).height),this.renderer.insertBefore(e.parentNode,t,e),this.renderer.appendChild(t,e)},t.prototype.initGrid=function(){this.grid=this.renderer.createElement("div");var t=this.grid;this.renderer.addClass(t,"slimscroll-grid"),this.renderer.setStyle(t,"position","absolute"),this.renderer.setStyle(t,"top","0"),this.renderer.setStyle(t,"bottom","0"),this.renderer.setStyle(t,this.options.position,"0"),this.renderer.setStyle(t,"width",this.options.gridWidth+"px"),this.renderer.setStyle(t,"background",this.options.gridBackground),this.renderer.setStyle(t,"opacity",this.options.gridOpacity),this.renderer.setStyle(t,"display","block"),this.renderer.setStyle(t,"cursor","pointer"),this.renderer.setStyle(t,"z-index","99"),this.renderer.setStyle(t,"border-radius",this.options.gridBorderRadius+"px"),this.renderer.setStyle(t,"margin",this.options.gridMargin),this.renderer.appendChild(this.wrapper,t)},t.prototype.initBar=function(){this.bar=this.renderer.createElement("div");var t=this.bar;this.renderer.addClass(t,"slimscroll-bar"),this.renderer.setStyle(t,"position","absolute"),this.renderer.setStyle(t,"top","0"),this.renderer.setStyle(t,this.options.position,"0"),this.renderer.setStyle(t,"width",this.options.barWidth+"px"),this.renderer.setStyle(t,"background",this.options.barBackground),this.renderer.setStyle(t,"opacity",this.options.barOpacity),this.renderer.setStyle(t,"display","block"),this.renderer.setStyle(t,"cursor","pointer"),this.renderer.setStyle(t,"z-index","100"),this.renderer.setStyle(t,"border-radius",this.options.barBorderRadius+"px"),this.renderer.setStyle(t,"margin",this.options.barMargin),this.renderer.appendChild(this.wrapper,t),this.barVisibilityChange.emit(!0)},t.prototype.getBarHeight=function(){var t=this.el.offsetHeight,e=Math.max(t/this.el.scrollHeight*t,30)+"px",r=parseInt(e,10)===t?"none":"block";this.wrapper.offsetHeight!==t&&this.renderer.setStyle(this.wrapper,"height",t+"px"),this.renderer.setStyle(this.bar,"height",e),this.renderer.setStyle(this.bar,"display",r),this.renderer.setStyle(this.grid,"display",r),this.barVisibilityChange.emit("none"!==r)},t.prototype.scrollTo=function(t,e,r){var i=this,o=Date.now(),n=this.el.scrollTop,s=parseInt(this.el.style.paddingTop,10)||0,a=parseInt(this.el.style.paddingBottom,10)||0,l=function(){var h=Date.now(),d=Math.min(1,(h-o)/e),p=M[r](d);if(s>0||a>0){var u=null;s>0&&(u=-(p*(t-(u=-s))+u),i.renderer.setStyle(i.el,"padding-top",u+"px")),a>0&&(u=p*(t-(u=a))+u,i.renderer.setStyle(i.el,"padding-bottom",u+"px"))}else i.el.scrollTop=p*(t-n)+n;i.setBarTop(),i.saveCurrent(),i.updateScrollState(),d<1&&requestAnimationFrame(l)};e&&r?requestAnimationFrame(l):(this.el.scrollTop=t,this.setBarTop(),this.saveCurrent(),this.updateScrollState())},t.prototype.scrollContent=function(t,e,r){var i=this,o=t,n=this.el.offsetHeight-this.bar.offsetHeight,s=this.el.scrollHeight-this.el.offsetHeight,a=null;return e&&(((o=parseInt(getComputedStyle(this.bar).top,10)+20*t/100*this.bar.offsetHeight)<0||o>n)&&(a=o>n?o-n:o),o=Math.min(Math.max(o,0),n),o=t>0?Math.ceil(o):Math.floor(o),this.renderer.setStyle(this.bar,"top",o+"px")),o=parseInt(getComputedStyle(this.bar).top,10)/(this.el.offsetHeight-this.bar.offsetHeight)*s,this.el.scrollTop=o,this.showBarAndGrid(),this.options.alwaysVisible||(this.visibleTimeout&&clearTimeout(this.visibleTimeout),this.visibleTimeout=setTimeout((function(){i.hideBarAndGrid()}),this.options.visibleTimeout)),this.updateScrollState(),this.saveCurrent(),a},t.prototype.updateScrollState=function(){var t=0===this.el.scrollTop,e=this.el.scrollTop===this.el.scrollHeight-this.el.offsetHeight,r=Math.ceil(this.el.scrollTop),i=new c({scrollPosition:r,isScrollAtStart:t,isScrollAtEnd:e});this.scrollChanged.emit(i)},t.prototype.initWheel=function(){var t=this,e=i.fromEvent(this.el,"DOMMouseScroll"),r=i.fromEvent(this.el,"mousewheel"),o=i.merge.apply(void 0,h([e,r])).subscribe((function(e){var r=0;e.wheelDelta&&(r=-e.wheelDelta/120),e.detail&&(r=e.detail/3);var i=t.scrollContent(r,!0,!1);e.preventDefault&&(t.options.alwaysPreventDefaultScroll||null===i)&&e.preventDefault()}));this.interactionSubscriptions.add(o)},t.prototype.initDrag=function(){var t=this,e=this.bar,r=i.fromEvent(this.document.documentElement,"mousemove"),n=i.fromEvent(this.document.documentElement,"touchmove"),s=i.fromEvent(e,"mousedown"),a=i.fromEvent(this.el,"touchstart"),l=i.fromEvent(this.document.documentElement,"mouseup"),d=i.fromEvent(this.document.documentElement,"touchend"),p=s.pipe(o.mergeMap((function(i){return t.pageY=i.pageY,t.top=parseFloat(getComputedStyle(e).top),r.pipe(o.map((function(e){return e.preventDefault(),t.top+e.pageY-t.pageY})),o.takeUntil(l))}))),u=a.pipe(o.mergeMap((function(r){return t.pageY=r.targetTouches[0].pageY,t.top=-parseFloat(getComputedStyle(e).top),n.pipe(o.map((function(e){return-(t.top+e.targetTouches[0].pageY-t.pageY)})),o.takeUntil(d))}))),c=i.merge.apply(void 0,h([p,u])).subscribe((function(e){t.body.addEventListener("selectstart",t.preventDefaultEvent,!1),t.renderer.setStyle(t.body,"touch-action","pan-y"),t.renderer.setStyle(t.body,"user-select","none"),t.renderer.setStyle(t.bar,"top",e+"px");var r=t.scrollContent(0,!0,!1),i=t.el.offsetHeight-t.bar.offsetHeight;r&&r<0&&-r<=i?t.renderer.setStyle(t.el,"paddingTop",-r+"px"):r&&r>0&&r<=i&&t.renderer.setStyle(t.el,"paddingBottom",r+"px")})),g=i.merge.apply(void 0,h([l,d])).subscribe((function(){t.body.removeEventListener("selectstart",t.preventDefaultEvent,!1);var e=parseInt(t.el.style.paddingTop,10),r=parseInt(t.el.style.paddingBottom,10);t.renderer.setStyle(t.body,"touch-action","unset"),t.renderer.setStyle(t.body,"user-select","default"),(e>0||r>0)&&t.scrollTo(0,300,"linear")}));this.interactionSubscriptions.add(c),this.interactionSubscriptions.add(g)},t.prototype.setBarTop=function(){var t=Math.max(this.el.offsetHeight/this.el.scrollHeight*this.el.offsetHeight,30),e=this.el.scrollHeight-this.el.clientHeight,r=parseInt(this.el.style.paddingBottom,10)||0,i=this.el.scrollTop/e;if(0===r){var o=Math.round((this.el.clientHeight-t)*i);o>0&&this.renderer.setStyle(this.bar,"top",o+"px")}},t.prototype.saveCurrent=function(){var t=this.el.scrollHeight-this.el.clientHeight,e=this.el.scrollTop/t;this.current={max:t,percent:e}},t.prototype.showBarAndGrid=function(){this.renderer.setStyle(this.grid,"background",this.options.gridBackground),this.renderer.setStyle(this.bar,"background",this.options.barBackground)},t.prototype.hideBarAndGrid=function(){this.renderer.setStyle(this.grid,"background","transparent"),this.renderer.setStyle(this.bar,"background","transparent")},t.prototype.preventDefaultEvent=function(t){t.preventDefault(),t.stopPropagation()},t.prototype.destroy=function(){if(this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.el.parentElement.classList.contains("slimscroll-wrapper")){var t=this.el.parentElement,e=t.querySelector(".slimscroll-bar");t.removeChild(e);var r=t.querySelector(".slimscroll-grid");t.removeChild(r),this.unwrap(t)}this.interactionSubscriptions&&this.interactionSubscriptions.unsubscribe()},t.prototype.unwrap=function(t){for(var e=document.createDocumentFragment();t.firstChild;){var r=t.removeChild(t.firstChild);e.appendChild(r)}t.parentNode.replaceChild(e,t)},t.prototype.onResize=function(){var t=n({},this.current).percent;this.destroy(),this.setup(),this.scrollTo(Math.round((this.el.scrollHeight-this.el.clientHeight)*t),null,null)},t.ctorParameters=function(){return[{type:e.ViewContainerRef,decorators:[{type:e.Inject,args:[e.ViewContainerRef]}]},{type:e.Renderer2,decorators:[{type:e.Inject,args:[e.Renderer2]}]},{type:void 0,decorators:[{type:e.Inject,args:[r.DOCUMENT]}]},{type:void 0,decorators:[{type:e.Inject,args:[p]},{type:e.Optional}]}]},s([e.Input()],t.prototype,"enabled",void 0),s([e.Input()],t.prototype,"options",void 0),s([e.Input()],t.prototype,"scrollEvents",void 0),s([e.Output()],t.prototype,"scrollChanged",void 0),s([e.Output()],t.prototype,"barVisibilityChange",void 0),s([e.HostListener("window:resize",[])],t.prototype,"onResize",null),t=s([e.Directive({selector:"[slimScroll]",exportAs:"slimScroll"}),a(0,e.Inject(e.ViewContainerRef)),a(1,e.Inject(e.Renderer2)),a(2,e.Inject(r.DOCUMENT)),a(3,e.Inject(p)),a(3,e.Optional())],t)}(),x=function(){function t(){}return t=s([e.NgModule({declarations:[H],exports:[H]})],t)}();t.NgSlimScrollModule=x,t.SLIMSCROLL_DEFAULTS=p,t.SlimScrollDirective=H,t.SlimScrollEvent=d,t.SlimScrollOptions=u,t.SlimScrollState=c,t.easing=M,t.ɵ0=g,t.ɵ1=y,t.ɵ10=O,t.ɵ11=C,t.ɵ12=E,t.ɵ2=f,t.ɵ3=b,t.ɵ4=m,t.ɵ5=v,t.ɵ6=S,t.ɵ7=w,t.ɵ8=T,t.ɵ9=B,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-slimscroll.umd.min.js.map